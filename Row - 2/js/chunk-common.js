(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-common"],{"088a":function(e,t,n){"use strict";n("3c8b")},"2d5d":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v}));n("c975"),n("d81d"),n("fb6a"),n("d3b7"),n("ac1f"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("ddb0"),n("2b3d");var a=n("cadb"),i=n("c1b7"),s=/\b\.(png|jpe?g|svg|webp|ico|gif)(?:\?(?:(?:(?:[\w_-]+=[\w_-]+)(?:&[\w_-]+=[\w_-]+)*)|(?:[\w_-]+)))?\b/gim,o=/\b(https?:\/\/\S*?\.(?:png|jpe?g|svg|webp|ico|gif)(?:\?(?:(?:(?:[\w._-]+=[\w._-]+)(?:&[\w._-]+=[\w._-]+)*)|(?:[\w._-]+)))?)\b/gim,c=/(https?:\/\/\S*?\.(?:png|jpe?g|svg|webp|ico|gif)(?:\?(?:(?:(?:[\w._-]+=[\w._-]+)(?:&[\w._-]+=[\w._-]+)*)|(?:[\w._-]+)))?)/gim,r=["jpg","jpeg","png","svg","gif","webp","ico"];function l(e){return new Promise((function(t,n){var a;try{a=new URL(e)}catch(o){return void n(o)}var i=a.pathname.match(s);i?t(i[0].slice(1).toLowerCase()):(fetch(e).then((function(e){try{return e.blob()}catch(o){n(o)}})).catch((function(e){return n(e)})).then((function(e){e?t(e.type.split("/")[1]):n(e)})),setTimeout((function(){t("-")}),5e3))}))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(s,o){return l(e.src).then((function(c){if(r.indexOf(c)<0||"-"===c)o(e);else if(e.format=c,0===e.width){var l=!1,u=!1,d=new Image;d.src=e.src,d.onload=function(){u=!0,e.width=this.naturalWidth,e.height=this.naturalHeight,l||s(e)},d.onerror=function(t){l||o(e)},n&&setTimeout((function(){u||(l=!0,o(e),a["a"].sendMessage(i["e"].FROM.POPUP,{to:i["e"].TO.BACKGROUND,action:i["e"].ACTION.ADD_IMAGES,images:[e.src],tabId:t}))}),2e4)}else s(e)})).catch((function(e){return o(e)}))}))}function d(e,t){var n=e.map(t).sort((function(e,t){return e-t})),a=n[0],i=n.pop();return{min:a,max:i}}function f(e,t){return e>=t.min&&e<=t.max}function m(e,t){return e.toLowerCase().indexOf(t)>=0}function g(e,t){return e===t}function h(e){return function(t){return f(t.width,e.widthRange)&&f(t.height,e.heightRange)&&(m(t.src,e.url)||g(t.format,e.url))}}function b(e,t){if(!e||!e.style)return"";var n=t;if(n.indexOf("-")>=0&&(n=t.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))),e.currentStyle)return e.style[n]||e.currentStyle[n]||"";var a=document.defaultView||window;return e.style[n]||a.getComputedStyle(e,"").getPropertyValue(t)||""}function p(e,t){var n=b(e,t);if(n){var a=n.match(c);return a?a[0]:void 0}}function v(e){var t=[],n=p(e,"background");n&&t.push(n);var a=p(e,"background-image");return a&&t.push(a),t}},"379f":function(e,t,n){},"3b73":function(e,t,n){"use strict";n("9668")},"3c8b":function(e,t,n){},4360:function(e,t,n){"use strict";var a=n("5530"),i=n("2b0e"),s=n("2f62"),o=n("c1b7"),c=(n("4de4"),n("2909")),r=n("2d5d"),l={images:function(e){var t=Object(c["a"])(e.images).sort((function(e,t){return e.width>t.width||e.width===t.width&&e.height>t.height?1:-1})).reverse();return e.filters.widthRange.min===e.widthRange.min&&e.filters.widthRange.max===e.widthRange.max&&e.filters.heightRange.min===e.heightRange.min&&e.filters.heightRange.max===e.heightRange.max&&""===e.filters.url?t:Object(c["a"])(t).filter(Object(r["a"])(e.filters))},rawImages:function(e){return e.images},selectedImages:function(e){return e.images.filter((function(e){return e.selected}))},selectedLength:function(e){return e.selectedLength},totalImages:function(e){return e.images.length},preferences:function(e){return e.preferences},showPreferences:function(e){return e.showPreferences},showFilters:function(e){return e.showFilters},loadedFilters:function(e){return e.loadedFilters},showWarning:function(e){return e.showWarning},loadedImages:function(e){return e.loadedImages},widthRange:function(e){return e.widthRange},heightRange:function(e){return e.heightRange},filters:function(e){return e.filters},activeTab:function(e){return e.activeTab},detectedImages:function(e){return e.detectedImages},locales:function(e){return e.locales},systemTab:function(e){return e.systemTab}},u=(n("c740"),n("c975"),n("d81d"),n("a434"),n("b64b"),function(e,t){return e.findIndex((function(e){return e.index===t.index}))}),d={setImages:function(e,t){i["default"].set(e,"images",Object(c["a"])(t))},addImage:function(e,t){e.images.push(t)},addSrc:function(e,t){e.srcs.push(t)},updateImage:function(e,t){for(var n=u(e.images,t),a=0,i=Object.keys(t);a<i.length;a++){var s=i[a];e.images[n][s]=t[s]}},removeImage:function(e,t){var n=u(e.images,t);e.images.splice(n,1);var a=e.srcs.indexOf(t.src);e.srcs.splice(a,1)},imageLoaded:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.loadedImages=e.images.filter((function(e){return e.loaded})).length,e.loadedImages===e.images.length){var n=Object(r["c"])(e.images,(function(e){return e.width})),i=Object(r["c"])(e.images,(function(e){return e.height})),s=!0;e.widthRange.min===e.filters.widthRange.min&&e.widthRange.max===e.filters.widthRange.max&&e.heightRange.min===e.filters.heightRange.min&&e.heightRange.max===e.filters.heightRange.max&&(s=!1),e.widthRange=Object(a["a"])({},n),e.heightRange=Object(a["a"])({},i),!t&&s||!(!e.loadedFilters||e.noSavedFilters&&e.loadedFilters)||(e.filters.widthRange=Object(a["a"])({},n),e.filters.heightRange=Object(a["a"])({},i))}},selectImage:function(e,t){var n=u(e.images,t);e.images[n].selected=t.selected,e.selectedLength=e.images.filter((function(e){return e.selected})).length},selectAll:function(e,t){var n=0;e.images.map((function(a){a.loaded&&Object(r["a"])(e.filters)(a)&&(a.selected=t,t&&n++)})),e.selectedLength=t?n:0},setPreferences:function(e,t){e.preferences=t},setShowPreferences:function(e,t){e.showPreferences=t},setShowFilters:function(e,t){e.showFilters=t},setShowWarning:function(e,t){e.showWarning=t},updateFilters:function(e,t){e.filters=Object(a["a"])(Object(a["a"])({},e.filters),t)},setActiveTab:function(e,t){e.activeTab=Object(a["a"])({},t)},setDetectedImages:function(e,t){e.detectedImages=t},setLocales:function(e,t){e.locales=Object(a["a"])(Object(a["a"])({},e.locales),t)},setSystemTab:function(e,t){e.systemTab=t},setLoadedFilters:function(e,t){e.loadedFilters=t},setNoSavedFilters:function(e,t){e.noSavedFilters=t}},f=(n("0481"),n("4160"),n("45fc"),n("4069"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("cadb")),m=n("d4ec"),g=n("bee2"),h=function(){function e(){Object(m["a"])(this,e)}return Object(g["a"])(e,null,[{key:"initImageDetector",value:function(e){return f["a"].executeFileOnActiveTab("js/image-detector.js",e)}},{key:"checkImageDetector",value:function(e){var t=this;return f["a"].executeCodeOnActiveTab("window.imageDetector.exists()",e).then((function(n){if(!n)return t.initImageDetector(e)}))}},{key:"executeImageDetectorFunction",value:function(e,t){return this.checkImageDetector(t).then((function(){return f["a"].executeCodeOnActiveTab("window.imageDetector.".concat(e,"()"),t)}))}},{key:"findImages",value:function(e){return this.executeImageDetectorFunction("findImages",e)}},{key:"clearImages",value:function(e){return this.executeImageDetectorFunction("clearImages",e)}},{key:"sendImages",value:function(e){return this.executeImageDetectorFunction("sendImages",e)}},{key:"getImagesArray",value:function(e){return this.executeImageDetectorFunction("getImagesArray",e)}}]),e}();function b(e,t){var n,a;e.widthRange.min===t.widthRange.min&&e.widthRange.max===t.widthRange.max&&e.heightRange.min===t.heightRange.min&&e.heightRange.max===t.heightRange.max?(n=o["e"].ACTION.DELETE_FILTERS,a={domain:e.activeTab.domain}):(n=o["e"].ACTION.SAVE_FILTERS,a={domain:e.activeTab.domain,showFilters:e.showFilters,filters:t}),f["a"].sendMessage(o["e"].FROM.POPUP,{to:o["e"].TO.BACKGROUND,action:n,data:a})}var p=0,v=function(){return p++},w={loadPrefs:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return f["a"].getFromSyncStorage(Object(a["a"])({},e.state.preferences)).then((function(n){e.commit("setPreferences",n),t&&n.popup&&f["a"].hideSidebar(e.state.activeTab.id)}))},setPrefs:function(e,t){var n=Object(a["a"])(Object(a["a"])({},e.state.preferences),t);e.commit("setPreferences",n)},savePrefs:function(e,t){f["a"].setToSyncStorage(Object(a["a"])({},e.state.preferences))},loadActiveTab:function(e){return f["a"].getActiveTab().then((function(t){var n=new URL(t.url);e.commit("setActiveTab",{id:t.id,domain:n.host,url:t.url})}))},loadImages:function(e){var t=e.state.preferences.allFrames;return h.initImageDetector(t).then((function(){return h.findImages(t)})).then((function(e){return h.getImagesArray(t)})).then((function(t){var n=t.flat().filter((function(e){return!!e})),i=n.map((function(t,n){e.commit("addSrc",t);var i={index:v(),src:t,selected:!1,loaded:!1,format:"-",width:0,height:0};return Object(r["e"])(Object(a["a"])({},i),e.state.activeTab.id,!0).then((function(t){t.loaded=!0,e.commit("updateImage",t),e.commit("imageLoaded")})).catch((function(t){e.commit("removeImage",i),e.commit("imageLoaded")})),i}));e.commit("setImages",i),e.commit("setDetectedImages",!0)})).catch((function(t){t instanceof TypeError&&"Cannot read property 'flat' of null"===t.message&&e.commit("setSystemTab",!0)}))},addImages:function(e,t){return new Promise((function(n,i){t.forEach((function(t){if(!e.state.srcs.some((function(e){return e===t}))){e.commit("addSrc",t);var n={index:v(),src:t,selected:!1,loaded:!1,format:"-",width:0,height:0};Object(r["e"])(Object(a["a"])({},n)).then((function(t){t.loaded=!0,e.commit("addImage",t),e.commit("imageLoaded",!1)})).catch((function(e){console.log("failed to load image - ",n)}))}}))}))},resetImages:function(e){e.commit("setImages",[]);var t=e.state.preferences.allFrames;return h.initImageDetector(t).then((function(){return h.findImages(t)})).then((function(e){return h.getImagesArray(t)})).then((function(t){var n=t.flat().filter((function(e){return!!e}));n.forEach((function(t){var n={index:v(),src:t,selected:!1,loaded:!1,format:"-",width:0,height:0};Object(r["e"])(Object(a["a"])({},n)).then((function(t){t.loaded=!0,e.commit("addImage",t),e.commit("imageLoaded",!1)})).catch((function(e){console.log("failed to load image - ",n)}))}))}))},selectImage:function(e,t){var n={index:t,selected:!0};e.commit("selectImage",n)},deselectImage:function(e,t){var n={index:t,selected:!1};e.commit("selectImage",n)},selectAll:function(e){e.commit("selectAll",!0)},deselectAll:function(e){e.commit("selectAll",!1)},showPreferences:function(e){e.commit("setShowPreferences",!0)},hidePreferences:function(e){e.commit("setShowPreferences",!1)},loadFilters:function(e){f["a"].sendMessage(o["e"].FROM.POPUP,{to:o["e"].TO.BACKGROUND,action:o["e"].ACTION.GET_FILTERS,data:{domain:e.state.activeTab.domain}},(function(t){e.commit("setLoadedFilters",!0),e.commit("setNoSavedFilters",!0),t&&(e.commit("setNoSavedFilters",!1),e.commit("selectAll",!1),e.commit("updateFilters",{widthRange:{min:t.filters.widthRange.min,max:t.filters.widthRange.max},heightRange:{min:t.filters.heightRange.min,max:t.filters.heightRange.max},url:t.filters.url}),e.commit("setShowFilters",!!t.showFilters))}))},toggleFilters:function(e){var t=!e.state.showFilters;e.commit("setShowFilters",t),b(e.state,Object(a["a"])({},e.state.filters))},updateFilters:function(e,t){e.commit("selectAll",!1),e.commit("updateFilters",t);var n=Object(a["a"])(Object(a["a"])({},e.state.filters),t),i=e.state;b(i,n)},showWarning:function(e){e.commit("setShowWarning",!0)},hideWarning:function(e){e.commit("setShowWarning",!1)},loadLocales:function(e){f["a"].sendMessage(o["e"].FROM.POPUP,{to:o["e"].TO.BACKGROUND,action:o["e"].ACTION.GET_LOCALES},(function(t){e.commit("setLocales",t)}))}};i["default"].use(s["a"]);t["a"]=new s["a"].Store({state:{srcs:[],images:[],loadedImages:0,detectedImages:!1,selectedLength:0,showPreferences:!1,showFilters:!1,loadedFilters:!1,noSavedFilters:!1,showWarning:!1,preferences:Object(a["a"])({},o["b"]),widthRange:{min:0,max:0},heightRange:{min:0,max:0},filters:{widthRange:{min:0,max:0},heightRange:{min:0,max:0},url:""},activeTab:{id:0,domain:"",url:""},locales:Object(a["a"])({},o["a"]),systemTab:!1},getters:l,mutations:d,actions:w,modules:{}})},5505:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-overlay",{attrs:{show:e.showOverlay(),opacity:"1"},scopedSlots:e._u([{key:"overlay",fn:function(){return[e.images.length>0?n("div",{staticClass:"text-center"},[n("p",[e._v(e._s(e.getProcessedText()))]),n("b-progress",{attrs:{value:100*e.loadedImages/e.images.length,variant:"success",striped:"",animated:!0}})],1):n("div",{staticClass:"text-center"},[n("p",[e._v(e._s(e.locales.detectingImages))]),n("b-spinner")],1)]},proxy:!0}])},[n("div",{staticClass:"popup-container"},[n("popup-header"),e.loadedFilters&&!e.showOverlay()?n("filters"):e._e(),n("div",{staticClass:"images-wrapper"},[e.images.length>0?n("div",{staticClass:"images-container"},e._l(e.images,(function(e){return n("image-block",{key:"image-"+e.index,attrs:{image:e}})})),1):e.detectedImages&&0===e.rawImages.length?n("div",{staticClass:"not-found-images"},e._l(e.getText(e.locales.notFoundImages),(function(t,a){return n("p",{key:a,domProps:{innerHTML:e._s(t)}})})),0):e.detectedImages?n("div",{staticClass:"not-found-images"},e._l(e.getText(e.locales.noMatchingImages),(function(t,a){return n("p",{key:a,domProps:{innerHTML:e._s(t)}})})),0):e.systemTab?n("div",{staticClass:"system-tab"},e._l(e.getText(e.locales.systemPage),(function(t,a){return n("p",{key:a,domProps:{innerHTML:e._s(t)}})})),0):e._e()]),n("preferences-modal",{attrs:{show:e.showPreferences}}),n("warning-modal",{attrs:{show:e.showWarning}})],1)])},i=[],s=(n("ac1f"),n("1276"),n("5530")),o=n("2f62"),c=n("cadb"),r=n("c1b7"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"popup-header"},[n("div",{staticClass:"left-side"},[n("div",{staticClass:"total-images"},[e.selectedLength<=0?n("p",{staticClass:"images-count"},[e._v(" "+e._s(e.getText(e.locales.foundSingle,e.locales.foundPlural,e.images.length))+" ")]):n("b-button",{attrs:{size:"m",variant:"success"},on:{click:e.onDownloadAll}},[n("b-icon-download"),e._v(" "+e._s(e.getText(e.locales.downloadSingle,e.locales.downloadPlural,e.selectedLength))+" ")],1)],1),e.images.length>0?n("div",{staticClass:"select-all"},[e.images.length>e.selectedLength?n("b-button",{attrs:{variant:"primary"},on:{click:e.selectAll}},[e._v(" "+e._s(e.locales.selectAll)+" ")]):n("b-button",{staticClass:"white--text",attrs:{variant:"secondary"},on:{click:e.deselectAll}},[e._v(" "+e._s(e.locales.deselectAll)+" ")])],1):e._e()]),n("div",{staticClass:"right-side"},[n("b-button",{attrs:{pill:"",variant:"dark"},on:{click:e.toggleFilters}},[n("b-icon-filter")],1),n("b-button",{attrs:{pill:"",variant:"dark"},on:{click:e.showPreferences}},[n("b-icon-gear")],1)],1)])},u=[],d=(n("4160"),n("159b"),{name:"PopupHeader",computed:Object(s["a"])({},Object(o["c"])({images:"images",selectedImages:"selectedImages",selectedLength:"selectedLength",loadedImages:"loadedImages",preferences:"preferences",activeTab:"activeTab",locales:"locales"})),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["selectAll","deselectAll","showPreferences","showWarning","toggleFilters"])),{},{downloadAllImages:function(e){var t=this;e.forEach((function(e){c["a"].download(e.src,t.activeTab.url)}))},onDownloadAll:function(){this.selectedLength>1&&this.preferences.warnings?this.showWarning():this.downloadAllImages(this.selectedImages)},addS:function(e){return e>1?"s":""},getText:function(e,t,n){var a=n>1?t:e;return a.replaceAll(r["d"].IMAGES_COUNT,n)}})}),f=d,m=(n("d44a"),n("2877")),g=Object(m["a"])(f,l,u,!1,null,"51e62db8",null),h=g.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"image-block",class:{selected:e.image.selected},attrs:{id:"image-"+e.image.index},on:{click:e.onClick}},[n("div",{staticClass:"image-header"},[n("div",{staticClass:"left-side"},[n("b-button",{attrs:{pill:"",variant:"outline-dark",size:"sm"},on:{click:e.onOpenInNewTabClick}},[n("b-icon-box-arrow-up-right")],1),n("b-button",{attrs:{pill:"",variant:"outline-dark",size:"sm"},on:{click:e.onDownloadClick}},[n("b-icon-download")],1)],1),n("div",{staticClass:"right-side"},[n("span",{staticClass:"image-format"},[e._v(e._s(e.image.format))]),n("span",{staticClass:"image-dimensions"},[n("span",[e._v(e._s(e.image.width))]),e._v(" x "),n("span",[e._v(e._s(e.image.height))])])])]),n("div",{staticClass:"image-body"},[n("img",{attrs:{src:e.image.src}})]),n("div",{staticClass:"image-footer"},[n("b-input-group",[n("b-form-input",{attrs:{value:e.image.src,readonly:!0}}),n("b-input-group-append",[n("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.image.src,expression:"image.src",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"}],staticClass:"copy-btn",class:{copied:e.copied},attrs:{variant:"outline-dark",size:"sm","aria-label":e.copied?e.locales.copiedImageLink:""},on:{mouseleave:e.onMouseLeave}},[n("b-icon-clipboard")],1)],1)],1)],1)])},p=[],v=(n("c975"),{name:"ImageBlock",props:["image"],data:function(){return{copied:!1}},computed:Object(s["a"])({},Object(o["c"])({activeTab:"activeTab",locales:"locales"})),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["selectImage","deselectImage"])),{},{onClick:function(e){var t=e.path[0];["input","svg","path","g","button"].indexOf(t.tagName.toLowerCase())>=0||(this.image.selected?this.deselectImage(this.image.index):this.selectImage(this.image.index))},onCopy:function(e){this.copied=!0},onMouseLeave:function(){this.copied=!1},onDownloadClick:function(){c["a"].download(this.image.src,this.activeTab.url)},onOpenInNewTabClick:function(){window.open(this.image.src)}})}),w=v,O=(n("baeb"),Object(m["a"])(w,b,p,!1,null,"5708a5ac",null)),I=O.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"preferences-modal",attrs:{id:"preferences-modal","modal-class":"image-downloader-modal","is-visible":e.showPreferences,"hide-footer":""},on:{hidden:e.onModalHide},scopedSlots:e._u([{key:"modal-header",fn:function(){return[e._v(" "+e._s(e.locales.preferencesTitle)+" ")]},proxy:!0}])},[n("preferences",{on:{"save-prefs":e.hideModal,"cancel-prefs":e.hideModal}})],1)},_=[],S=n("c8f6"),C={name:"PreferencesModal",props:["show"],components:{Preferences:S["a"]},data:function(){return{clicked:!1}},computed:Object(s["a"])({},Object(o["c"])({showPreferences:"showPreferences",locales:"locales"})),updated:function(){this.show&&(this.clicked=!1,this.$refs["preferences-modal"].show())},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["hidePreferences","loadPrefs"])),{},{onModalHide:function(e,t){this.hidePreferences(),this.clicked||this.loadPrefs()},hideModal:function(){this.clicked=!0,this.$refs["preferences-modal"].hide()}})},A=C,E=Object(m["a"])(A,T,_,!1,null,null,null),R=E.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"filters-container"},[n("b-collapse",{attrs:{id:"filters-collapse",visible:!!e.showFilters}},[n("b-card",{staticClass:"filters-card"},[n("div",[n("slider",{attrs:{title:e.locales.filterWidth,name:"widthRange",value:Object.values(e.filters.widthRange),min:e.widthRange.min,max:e.widthRange.max,onChange:e.onChange}}),n("slider",{attrs:{title:e.locales.filterHeight,name:"heightRange",value:Object.values(e.filters.heightRange),min:e.heightRange.min,max:e.heightRange.max,onChange:e.onChange}}),n("div",{staticClass:"input-filter"},[n("b-form-input",{attrs:{placeholder:e.locales.filterPlaceholder},on:{input:e.onUrlInput,change:e.onUrlChange}})],1)],1)])],1)],1)},y=[],P=n("ade3"),F=n("b012"),k=n.n(F),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"slider-container",class:{loaded:e.detectedImages&&e.rawImages.length<=e.loadedImages.length}},[n("b-input-group",{attrs:{prepend:e.title}},[n("b-form-input",{attrs:{value:e.loaded&&e.localValue[0]>0?e.localValue[0]:e.value[0],type:"number",min:e.min,max:e.loaded?e.localValue[1]:e.value[1],state:!!e.minIsValid&&null},on:{input:function(t){return e.onInput(t,!0)},change:e.onInputChange}}),n("b-form-input",{attrs:{value:e.loaded&&e.localValue[1]>0?e.localValue[1]:e.value[1],type:"number",min:e.loaded?e.localValue[0]:e.value[0],max:e.max,state:!!e.maxIsValid&&null},on:{input:function(t){return e.onInput(t,!1)},change:e.onInputChange}})],1),n("b-input-group",[n("b-form-slider",{attrs:{value:e.loaded&&e.localValue[0]>0?e.localValue:e.value,min:e.min,max:e.max},on:{change:e.onSliderChange,"slide-stop":e.onSliderStop}})],1)],1)},D=[],M=(n("b0c0"),n("2909")),L={name:"Slider",props:["name","value","min","max","title","onChange"],data:function(){return{minIsValid:!0,maxIsValid:!0,loaded:!1,localMin:0,localMax:0}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])({loadedFilters:"loadedFilters",rawImages:"rawImages",loadedImages:"loadedImages",detectedImages:"detectedImages"})),{},{localValue:{get:function(){return[this.localMin,this.localMax]},set:function(e){this.localMin=e[0],this.localMax=e[1]}}}),methods:{onSliderChange:function(e){this.loaded||(this.localMin=this.value[0],this.localMax=this.value[1],this.loaded=!0),this.localValue=e.newValue},onSliderStop:function(e){this.onChange(this.name,Object(M["a"])(this.localValue))},onInputChange:k()((function(e){this.onChange(this.name,Object(M["a"])(this.localValue))}),300),onInput:function(e,t){var n=parseInt(e),a=[],i=this.loaded?this.localValue:this.value;if(this.loaded||(this.loaded=!0),t){if(!n||n>i[1])return void(this.minIsValid=!1);this.minIsValid=!0,a.push(n),a.push(i[1])}else{if(!n||n<i[0])return void(this.maxIsValid=!1);this.maxIsValid=!0,a.push(i[0]),a.push(n)}this.localValue=a}}},N=L,G=(n("6afe"),Object(m["a"])(N,j,D,!1,null,null,null)),U=G.exports,V={name:"Filters",components:{Slider:U},computed:Object(s["a"])({},Object(o["c"])({showFilters:"showFilters",widthRange:"widthRange",heightRange:"heightRange",filters:"filters",locales:"locales"})),methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["updateFilters"])),{},{onChange:function(e,t){this.updateFilters(Object(P["a"])({},e,{min:t[0],max:t[1]}))},onUrlInput:k()((function(e){this.updateFilters({url:e.toLowerCase()})}),300),onUrlChange:function(e){this.updateFilters({url:e.toLowerCase()})}})},B=V,W=(n("e3da"),Object(m["a"])(B,x,y,!1,null,"7c80562e",null)),H=W.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"warning-modal",attrs:{id:"warning-modal","modal-class":"image-downloader-modal"},on:{hidden:e.onModalHide},scopedSlots:e._u([{key:"modal-header",fn:function(){return[e._v(" "+e._s(e.getDownloadingText())+" ")]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-button",{attrs:{variant:"success"},on:{click:e.onDownload}},[n("b-icon-download"),e._v(" "+e._s(e.locales.warningsDownload)+" ")],1),n("b-button",{on:{click:e.onCancel}},[e._v(" "+e._s(e.locales.warningsCancel)+" ")])]},proxy:!0}]),model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[n("div",{staticClass:"modal-body"},[e._l(e.getBodyText(),(function(t,a){return n("p",{key:a},[e._v(" "+e._s(t)+" ")])})),n("b-form-checkbox",{attrs:{value:!0,"unchecked-value":!1},model:{value:e.dontShow,callback:function(t){e.dontShow=t},expression:"dontShow"}},[e._v(" "+e._s(e.locales.warningsDoNotShow)+" ")])],2)])},Y=[],K={name:"WarningModal",props:["show","download"],data:function(){return{dontShow:!1}},computed:Object(s["a"])(Object(s["a"])({},Object(o["c"])({selectedImages:"selectedImages",selectedLength:"selectedLength",activeTab:"activeTab",locales:"locales"})),{},{showModal:{get:function(){return this.show},set:function(){this.hideModal()}}}),updated:function(){this.show&&this.$refs["warning-modal"].show()},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["hideWarning","setPrefs","savePrefs"])),{},{onModalHide:function(e,t){e.preventDefault(),this.hideWarning()},hideModal:function(){this.$refs["warning-modal"].hide()},onDownload:function(){var e=this;this.selectedImages.forEach((function(t){c["a"].download(t.src,e.activeTab.url)})),this.hideModal(),this.dontShow&&(this.setPrefs({warnings:!1}),this.savePrefs())},onCancel:function(){this.hideModal()},getDownloadingText:function(){return this.locales.warningsDownloading.replaceAll(r["d"].IMAGES_COUNT,this.selectedLength)},getBodyText:function(){return this.locales.warningsText.split("\n")}})},X=K,z=(n("9758"),Object(m["a"])(X,$,Y,!1,null,null,null)),J=z.exports,q={name:"Extension",components:{PopupHeader:h,ImageBlock:I,PreferencesModal:R,Filters:H,WarningModal:J},computed:Object(s["a"])({},Object(o["c"])({images:"images",rawImages:"rawImages",loadedImages:"loadedImages",showPreferences:"showPreferences",preferences:"preferences",activeTab:"activeTab",showWarning:"showWarning",detectedImages:"detectedImages",locales:"locales",systemTab:"systemTab",filters:"filters",loadedFilters:"loadedFilters"})),created:function(){var e=this;this.loadActiveTab().then((function(){return e.loadLocales(),e.loadPrefs(!0)})).then((function(){e.loadImages().then((function(){e.loadFilters()}))})),this.initMessagesListener()},methods:Object(s["a"])(Object(s["a"])({},Object(o["b"])(["loadImages","loadPrefs","loadFilters","loadLocales","loadActiveTab","addImages"])),{},{initMessagesListener:function(){c["a"].onMessage(function(e,t,n){var a=e.body?e.body:e;if(a.from===r["e"].FROM.BACKGROUND&&a.tabId===this.activeTab.id){switch(a.action){case r["e"].ACTION.ADD_IMAGES:this.addImages(a.images);break}n()}}.bind(this))},showOverlay:function(){return!this.systemTab&&(!this.detectedImages||this.rawImages.length>this.loadedImages)},getProcessedText:function(){var e=this.locales.processingImages;return e=e.replaceAll(r["d"].PROCESSED_COUNT,this.loadedImages),e=e.replaceAll(r["d"].TOTAL_IMAGES,this.rawImages.length),e},getText:function(e){return e.split("\n")}})},Q=q,Z=(n("088a"),Object(m["a"])(Q,a,i,!1,null,"618cdb40",null));t["a"]=Z.exports},"6afe":function(e,t,n){"use strict";n("76fa")},"76fa":function(e,t,n){},9668:function(e,t,n){},9758:function(e,t,n){"use strict";n("bf84")},b48f:function(e,t,n){},baeb:function(e,t,n){"use strict";n("d322")},bf84:function(e,t,n){},c1b7:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return r}));var a={FROM:{BACKGROUND:"BACKGROUND",CHROME_PROXY:"CHROME_PROXY",SIDEBAR_VUE:"SIDEBAR_VUE",IMAGES_OBSERVER:"IMAGES_OBSERVER",POPUP:"POPUP"},TO:{SIDEBAR:"SIDEBAR",CHROME:"CHROME",BACKGROUND:"BACKGROUND",POPUP:"POPUP"},ACTION:{ADD_IMAGES:"ADD_IMAGES",DOWNLOAD:"DOWNLOAD",GET_FROM_SYNC_STORAGE:"GET_FROM_SYNC_STORAGE",SET_TO_SYNC_STORAGE:"SET_TO_SYNC_STORAGE",GET_ACTIVE_TAB:"GET_ACTIVE_TAB",EXECUTE_SCRIPT:"EXECUTE_SCRIPT",SIDEBAR_TOGGLE:"SIDEBAR_TOGGLE",SIDEBAR_HIDE:"SIDEBAR_HIDE",SIDEBAR_HIDDEN:"SIDEBAR_HIDDEN",POPUP_IS_OPEN:"SIDEBAR_IS_OPEN",GET_LOCALES:"GET_LOCALES",SIDEBAR_IS_OPEN:"SIDEBAR_IS_OPEN",GET_FILTERS:"GET_FILTERS",SAVE_FILTERS:"SAVE_FILTERS",DELETE_FILTERS:"DELETE_FILTERS"}},i={CHILD_LIST:"childList",ATTRIBUTES:"attributes",CHAR_DATA:"characterData"},s={PROCESSED_COUNT:"{{processed_images_count}}",TOTAL_IMAGES:"{{total_images_count}}",IMAGES_COUNT:"{{images_count}}"},o={extName:"",extDescription:"",foundSingle:"",foundPlural:"",downloadSingle:"",downloadPlural:"",selectAll:"",deselectAll:"",copiedImageLink:"",filterWidth:"",filterHeight:"",filterPlaceholder:"",preferencesTitle:"",preferencesPopup:"",preferencesAllFrames:"",preferencesWarnings:"",preferencesDownload:"",preferencesSave:"",preferencesCancel:"",warningsDownloading:"",warningsText:"",warningsDoNotShow:"",warningsDownload:"",warningsCancel:"",detectingImages:"",processingImages:"",notFoundImages:"",noMatchingImages:"",systemPage:""},c={popup:!0,allFrames:!1,warnings:!0,domainFolder:!0},r={NAME:"ImageDownloader",VERSION:1,STORE_NAME:"Filters",INDEX_FIELD:"domain"}},c8f6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"prefs-container"},[n("div",{staticClass:"prefs-body"},[n("div",{staticClass:"input-container"},[n("b-form-checkbox",{attrs:{switch:"",id:"pref-popup",checked:e.preferences.popup},on:{input:function(t){return e.onChanged("popup",t)}}},[e._v(" "+e._s(e.locales.preferencesPopup)+" ")])],1),n("div",{staticClass:"input-container"},[n("b-form-checkbox",{attrs:{switch:"",id:"pref-all-frames",checked:e.preferences.allFrames},on:{input:function(t){return e.onChanged("allFrames",t)}}},[e._v(" "+e._s(e.locales.preferencesAllFrames)+" ")])],1),n("div",{staticClass:"input-container"},[n("b-form-checkbox",{attrs:{switch:"",id:"pref-warnings",checked:e.preferences.warnings},on:{input:function(t){return e.onChanged("warnings",t)}}},[e._v(" "+e._s(e.locales.preferencesWarnings)+" ")])],1),n("div",{staticClass:"input-container"},[n("b-form-checkbox",{attrs:{switch:"",id:"pref-domain-folder",checked:e.preferences.domainFolder},on:{input:function(t){return e.onChanged("domainFolder",t)}}},[e._v(" "+e._s(e.locales.preferencesDownload)+" ")])],1)]),n("div",{staticClass:"prefs-footer"},[n("b-button",{attrs:{variant:"success"},on:{click:e.onSave}},[e._v(" "+e._s(e.locales.preferencesSave)+" ")]),n("b-button",{on:{click:e.onCancel}},[e._v(" "+e._s(e.locales.preferencesCancel)+" ")])],1)])},i=[],s=n("ade3"),o=n("5530"),c=n("2f62"),r={name:"Preferences",computed:Object(o["a"])({},Object(c["c"])({preferences:"preferences",locales:"locales"})),methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["loadPrefs","savePrefs","setPrefs"])),{},{onChanged:function(e,t){this.setPrefs(Object(s["a"])({},e,t))},onSave:function(){this.savePrefs(),this.$emit("save-prefs")},onCancel:function(){this.loadPrefs(),this.$emit("cancel-prefs")}})},l=r,u=(n("3b73"),n("2877")),d=Object(u["a"])(l,a,i,!1,null,"39ef4a1a",null);t["a"]=d.exports},cadb:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("d3b7");var a=n("5530"),i=n("d4ec"),s=n("bee2"),o=n("262e"),c=n("2caf"),r=n("f3b1"),l=n("c1b7"),u=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(i["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,null,[{key:"callChromeFunc",value:function(e){var t=this;return new Promise((function(n,i){t.sendMessage(l["e"].FROM.CHROME_PROXY,Object(a["a"])({to:l["e"].TO.CHROME},e),(function(e){n(e)}))}))}},{key:"getActiveTab",value:function(){return this.callChromeFunc({action:l["e"].ACTION.GET_ACTIVE_TAB})}},{key:"executeScript",value:function(e,t){return this.callChromeFunc({action:l["e"].ACTION.EXECUTE_SCRIPT,data:{tabId:e,details:t}})}},{key:"getFromSyncStorage",value:function(e){return this.callChromeFunc({action:l["e"].ACTION.GET_FROM_SYNC_STORAGE,data:e})}},{key:"setToSyncStorage",value:function(e){return this.callChromeFunc({action:l["e"].ACTION.SET_TO_SYNC_STORAGE,data:e})}},{key:"download",value:function(e,t){return this.callChromeFunc({action:l["e"].ACTION.DOWNLOAD,data:{url:e,tabUrl:t}})}}]),n}(r["a"])},d322:function(e,t,n){},d44a:function(e,t,n){"use strict";n("b48f")},e3da:function(e,t,n){"use strict";n("379f")},f3b1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("d3b7");var a=n("d4ec"),i=n("bee2"),s=n("c1b7"),o=function(){function e(){Object(a["a"])(this,e),this.initProxyListener()}return Object(i["a"])(e,[{key:"initProxyListener",value:function(){this.constructor.onMessage(function(e,t,n){var a=this;if(e.body.to===s["e"].TO.CHROME){var i=e.body;switch(e.body.action){case s["e"].ACTION.GET_ACTIVE_TAB:this.constructor.getActiveTab().then((function(e){n(e)}));break;case s["e"].ACTION.EXECUTE_SCRIPT:this.constructor.executeScript(i.data.tabId,i.data.details).then((function(e){n(e)}));break;case s["e"].ACTION.GET_FROM_SYNC_STORAGE:this.constructor.getFromSyncStorage(i.data).then((function(e){a.constructor.setPopup(e.popup),n(e)}));break;case s["e"].ACTION.SET_TO_SYNC_STORAGE:this.constructor.setPopup(i.data.popup),this.constructor.setToSyncStorage(i.data).then((function(e){n(e)}));break;case s["e"].ACTION.DOWNLOAD:this.constructor.download(i.data.url,i.data.tabUrl),n();break;default:n()}}}.bind(this))}}],[{key:"getActiveTab",value:function(){return new Promise((function(e){chrome.tabs.query({active:!0,currentWindow:!0},(function(t){e(t[0])}))}))}},{key:"getActiveTabId",value:function(){var e=this;return new Promise((function(t){e.getActiveTab().then((function(e){t(e.id)}))}))}},{key:"getActiveTabUrl",value:function(){var e=this;return new Promise((function(t){e.getActiveTab().then((function(e){t(e.url)}))}))}},{key:"onMessage",value:function(e){chrome.runtime.onMessage.addListener((function(t,n,a){return e(t,n,a),!0}))}},{key:"sendMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};chrome.runtime.sendMessage({from:e,body:t},n)}},{key:"sendTabMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};chrome.tabs.sendMessage(e,t,n)}},{key:"onIconClick",value:function(e){chrome.browserAction.onClicked.addListener(e)}},{key:"executeScript",value:function(e,t){return new Promise((function(n,a){chrome.tabs.executeScript(e,t,(function(e){n(e)}))}))}},{key:"executeScriptOnActiveTab",value:function(e){var t=this;return this.getActiveTabId().then((function(n){return t.executeScript(n,e)}))}},{key:"executeFile",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.executeScript(e,{file:t,allFrames:n})}},{key:"executeFileOnActiveTab",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.executeScriptOnActiveTab({file:e,allFrames:t})}},{key:"executeCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.executeScript(e,{code:t,allFrames:n})}},{key:"executeCodeOnActiveTab",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.executeScriptOnActiveTab({code:e,allFrames:t})}},{key:"setPopup",value:function(e){chrome.browserAction.setPopup({popup:e?"popup.html":""})}},{key:"openPopup",value:function(e,t){chrome.browserAction.setPopup({tabId:e,popup:t})}},{key:"hideSidebar",value:function(e){this.sendTabMessage(e,{from:s["e"].FROM.BACKGROUND,to:s["e"].TO.SIDEBAR,action:s["e"].ACTION.SIDEBAR_HIDE})}},{key:"getFromSyncStorage",value:function(e){return new Promise((function(t,n){chrome.storage.sync.get(e,(function(e){t(e)}))}))}},{key:"setToSyncStorage",value:function(e){return new Promise((function(t,n){chrome.storage.sync.set(e)}))}},{key:"onImageFilenameDetermining",value:function(e){chrome.downloads.onDeterminingFilename&&chrome.downloads.onDeterminingFilename.addListener((function(t,n,a){return e(t,n,a),!0}))}},{key:"download",value:function(e,t){localStorage.setItem("tabUrl",t),chrome.downloads.download({url:e})}},{key:"getMessage",value:function(e){return chrome.i18n.getMessage(e)}},{key:"onInstalled",value:function(e){chrome.runtime.onInstalled.addListener(e)}}]),e}()}}]);